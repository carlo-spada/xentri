# Xentri Documentation Manifest
# This file is the source of truth for navigating the documentation hierarchy.
# AI agents should read this file first to understand the documentation structure.
#
# FOUR-LEVEL HIERARCHY:
#   Level 0: System (Constitution) - docs/*.md
#   Level 1: Category - docs/{category}/
#   Level 2: Sub-category - docs/{category}/{subcategory}/
#   Level 3: Module - docs/{category}/{subcategory}/{module}/

version: "3.0"
last_updated: "2025-12-01"
project: Xentri

# =============================================================================
# LEVEL 0: SYSTEM CONSTITUTION
# =============================================================================
# These documents define system-wide rules that ALL categories must follow.
# Location: docs/ (root level)
# Changes require explicit governance review.

system:
  description: "Constitutional documents - system-wide rules for all categories"
  location: "docs/"
  documents:
    - file: prd.md
      type: prd
      purpose: "Platform Requirements (PR-xxx) and Integration Contracts (IC-xxx)"
    - file: architecture.md
      type: architecture
      purpose: "System-wide technology decisions and patterns"
    - file: ux-design.md
      type: ux-design
      purpose: "System-wide UX principles and design system"
    - file: epics.md
      type: epics
      purpose: "Cross-cutting initiatives and system-level roadmap"
    - file: product-brief.md
      type: product-brief
      purpose: "Foundational vision - all work traces to this"
  governance:
    changes_require: "Explicit flagging and rationale"
    protected: true

# =============================================================================
# HIERARCHY DEFINITIONS (Levels 1-3)
# =============================================================================
#
# Level 1 - Category: Major domain of business value (platform, strategy, sales)
# Level 2 - Sub-category: Capability area with its own PRD and architecture
# Level 3 - Module: Smallest unit of implementation and billing
#
# Meta designation: Internal infrastructure, not user-facing
# - All of Platform is meta
# - User-facing categories (strategy, marketing, etc.) are NOT meta

# =============================================================================
# CATEGORIES
# =============================================================================

categories:
  # ---------------------------------------------------------------------------
  # META CATEGORY: Platform (Internal Infrastructure)
  # ---------------------------------------------------------------------------
  platform:
    purpose: "Core infrastructure for all categories"
    meta: true
    subcategories:
      orchestration:
        purpose: "Platform-specific cross-cutting concerns and coordination (NOT system constitution - that's at docs/ root)"
        meta: true
        type: meta  # Not an SPA
        modules: []  # No implementation modules, just docs
        key_files:
          - deployment-plan.md      # Platform deployment strategy
          - incident-response.md    # Platform incident handling
          - module_matrix.md        # Platform module overview
        notes: "System-wide constitutional docs (prd.md, architecture.md, etc.) are now at docs/ root level"

      infrastructure:
        purpose: "Events, authentication, billing, brief system"
        meta: true
        type: meta
        modules:
          - name: events
            purpose: "Event Spine and Operational Pulse"
            status: planned
          - name: auth
            purpose: "Authentication and permissions"
            status: planned
          - name: billing
            purpose: "Subscription and payment processing"
            status: planned
          - name: brief
            purpose: "Brief system storage and synthesis"
            status: planned

      frontend:
        purpose: "User interface layer"
        meta: true
        type: meta
        modules:
          - name: shell
            purpose: "Astro container application"
            package: "apps/shell"
            team_label: "team:shell"
            dependencies: [ui, ts-schema]
            status: active
          - name: ui
            purpose: "Shared component library"
            package: "packages/ui"
            team_label: "team:ui"
            dependencies: []
            consumers: [shell]
            status: active

      backend:
        purpose: "API and services layer"
        meta: true
        type: meta
        modules:
          - name: core-api
            purpose: "Primary Fastify API service"
            package: "services/core-api"
            team_label: "team:core-api"
            dependencies: [ts-schema]
            status: active

      shared:
        purpose: "Cross-module contracts and types"
        meta: true
        type: meta
        modules:
          - name: ts-schema
            purpose: "TypeScript types and Zod schemas"
            package: "packages/ts-schema"
            team_label: "team:ts-schema"
            dependencies: []
            consumers: [core-api, shell]
            status: active

  # ---------------------------------------------------------------------------
  # USER-FACING CATEGORIES
  # ---------------------------------------------------------------------------
  strategy:
    purpose: "Business strategy and clarity"
    meta: false
    subcategories: {}  # To be defined when building Strategy category

  marketing:  # RENAMED from "brand"
    purpose: "Brand, website, and market presence"
    meta: false
    subcategories: {}  # To be defined when building Marketing category

  sales:
    purpose: "Pipeline and revenue generation"
    meta: false
    subcategories: {}  # To be defined when building Sales category

  finance:
    purpose: "Money management and compliance"
    meta: false
    subcategories: {}  # To be defined when building Finance category

  operations:
    purpose: "Day-to-day business operations"
    meta: false
    subcategories: {}  # To be defined when building Operations category

  team:
    purpose: "People and organizational management"
    meta: false
    subcategories: {}  # To be defined when building Team category

  legal:
    purpose: "Contracts, compliance, and entity management"
    meta: false
    subcategories: {}  # To be defined when building Legal category

# =============================================================================
# NAVIGATION GUIDE
# =============================================================================
#
# When starting a session, agents should:
# 1. Read this manifest to understand the structure
# 2. Ask: "Which category and sub-category are you working on?"
# 3. Navigate to docs/{category}/{subcategory}/
# 4. If working on a specific module, navigate to docs/{category}/{subcategory}/{module}/
#
# Example session start:
#   Agent: "Which area are you working on?"
#   User: "core-api"
#   Agent: "Working in platform/backend/core-api for this session."

# =============================================================================
# STANDARD FOLDER STRUCTURE (4-Level Hierarchy)
# =============================================================================
#
# Level 0 - System (Constitution):
# docs/
# ├── prd.md                 # System PRD (PR-xxx, IC-xxx)
# ├── architecture.md        # System architecture
# ├── ux-design.md           # System UX principles
# ├── epics.md               # Cross-cutting epics
# ├── product-brief.md       # Foundational vision
# ├── manifest.yaml          # This file
# └── index.md               # Navigation hub
#
# Level 1 - Category:
# docs/{category}/
# ├── README.md              # Category overview
# ├── prd.md                 # Category requirements (FR-{CAT}-xxx)
# ├── architecture.md        # Category-specific decisions
# └── epics.md               # Category roadmap (optional)
#
# Level 2 - Sub-category:
# docs/{category}/{subcategory}/
# ├── README.md              # Sub-category overview
# ├── prd.md                 # Sub-category requirements (FR-{SUB}-xxx)
# ├── architecture.md        # Technical decisions
# ├── epics.md               # Implementation roadmap
# └── {module}/              # Individual modules
#
# Level 3 - Module:
# docs/{category}/{subcategory}/{module}/
# ├── README.md              # Module overview
# ├── prd.md                 # Module requirements (FR-{MOD}-xxx)
# ├── sprint-artifacts/      # Implementation tracking
# │   ├── sprint-status.yaml
# │   └── {story-files}.md
# └── interfaces/            # Public contracts
#
# =============================================================================
# INHERITANCE RULES
# =============================================================================
#
# Each level INHERITS all constraints from above and can only ADD:
# - Module inherits: System PRs + Category FRs + Sub-category FRs
# - Sub-category inherits: System PRs + Category FRs
# - Category inherits: System PRs
#
# Documents use frontmatter to declare their level:
#   ---
#   level: system | category | subcategory | module
#   document_type: prd | architecture | epics | ux-design | product-brief
#   parent: path/to/parent/prd.md (for non-system levels)
#   ---
